<!-- {company, student_list} -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#sheduleInterview">
    Shedule Interview
</button>

<!-- Modal -->
<div class="modal fade" id="sheduleInterview" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Shedule Interview</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body<%= company._id %>" style="font-size:16px;">
                <form id="shedule-interview<%= company._id %>"  method="POST" class="sign-in-form">
                    <div class="form-group">
                        <label for="profile">Profile</label>
                        <input name="profile" type="input" class="form-control form-control-sm" id="profile"
                            placeholder="enter Profile" value="" autocomplete="off">
                    </div>
                    <label for="student">Student</br><small>*if student doesnt appear here pls add student and shedule
                            interview</small></label>

                    <select name="studentId" class="form-select" aria-label="Default select example" id="student">
                        <option selected>Open this select menu</option>
                        <% for(k of student_list){ %>
                            <option value="<%= k._id %>">
                                <%= k.name %>
                            </option>
                            <% } %>
                    </select>
                    <br>
                    <label for="result">Result</label>
                    <select name="result" class="form-select" aria-label="Default select example" id="result">
                        <option selected>Open this select menu</option>
                        <option value="PASS">PASS</option>
                        <option value="FAIL">FAIL</option>
                        <option value="On Hold">On Hold</option>
                        <option value="Didn’t Attempt">Didn’t Attempt</option>
                    </select>
                    <br>
                    <input type="hidden" name="companyId" value="<%= company._id %>">
                    <input type="hidden" name="date" value="<%= company.date %>">
                    <input type="hidden" name="companyName" value="<%= company.companyName %>">
                </form>
            </div>
            <div class="modal-footer">
                <button id="sheduleInterviewCloseButton<%= company._id %>" type="button" class="btn btn-secondary"
                    data-dismiss="modal">Close</button>
                <button
                    onclick="sheduleInterview('shedule-interview<%= company._id %>', 'sheduleInterviewCloseButton<%= company._id %>')"
                    type="button" class="btn btn-primary">Save
                    changes</button>
            </div>
        </div>
    </div>
</div>

<script>
    function sheduleInterview(formId, closeBtnId) {
        console.log('reached sheduleInterview');
        let formIdtemp = document.getElementById(formId);
        console.log(formIdtemp);
        let shedulingInterviewForm = $('#'+formId);
        console.log('shedulingInterviewForm', shedulingInterviewForm);
        console.log('shedulingInterviewForm.serialize()', shedulingInterviewForm.serialize());
        document.getElementById(closeBtnId).click();
        $.ajax({
            type: 'post',
            url: '/company/shedule-interview/',
            data: shedulingInterviewForm.serialize(),
            success: function (data) {
                console.log(data);
                let updatedData = data.data.modifiedCompanyRecord
                // render sheduled interview table
                let rederableTable = document.getElementById('sheduled-interviews-table' + updatedData._id);
                rederableTable.innerHTML = data.data.html;
            }, error: function (error) {
                console.log(error.responseText);
            }
        });
    }

</script>